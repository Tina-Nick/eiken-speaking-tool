<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>英検スピーキング練習</title>
  <style>
    body { font-family: sans-serif; padding: 20px; background: #f4f4f4; }
    select, button { font-size: 1.2em; padding: 5px; margin: 5px; }
    .card { background: white; padding: 15px; margin-top: 20px; border-radius: 10px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
    .hidden { display: none; }
    .answer-block { margin-top: 10px; }
    .question-label { font-weight: bold; margin-top: 15px; font-size: 1.1em; }
  </style>
</head>
<body>
  <h1>英検スピーキング練習ツール</h1>

  <label for="gradeSelect">級を選んでください：</label>
  <select id="gradeSelect">
    <option value="grade3">英検3級</option>
    <option value="gradePre2">英検準2級</option>
  </select>

  <div>
    <button onclick="showQuestion()">質問①（Yes/No 質問）</button>
    <button onclick="showWhQuestion()">質問②</button>
  </div>

  <div id="questionCard" class="card hidden">
    <div class="question-label">質問①</div>
    <div id="questionText"></div>
    <div class="answer-block">
      <button id="yesBtn" onclick="showAnswer('yes')">Yesの答えを見る</button>
      <button id="noBtn" onclick="showAnswer('no')">Noの答えを見る</button>
      <p id="yesAnswer" class="hidden"></p>
      <p id="noAnswer" class="hidden"></p>
    </div>
  </div>

  <div id="whCard" class="card hidden">
    <div class="question-label">質問②</div>
    <div id="whQuestionText"></div>
    <div class="answer-block">
      <button id="yesBtnWh" onclick="showWhAnswer('yes')">Yesの答えを見る</button>
      <button id="noBtnWh" onclick="showWhAnswer('no')">Noの答えを見る</button>
      <p id="yesAnswerWh" class="hidden"></p>
      <p id="noAnswerWh" class="hidden"></p>
    </div>
  </div>

  <script src="grade3.js"></script>
  <script src="grade3_wh.js"></script>
  <script src="gradePre2.js"></script>
  <script src="gradePre2_wh.js"></script>
  <script>
    let currentQA = null;
    let currentWhQA = null;
    let currentGrade = "grade3";

    const gradeSelect = document.getElementById("gradeSelect");

    gradeSelect.addEventListener("change", () => {
      currentGrade = gradeSelect.value;
      // リセット
      document.getElementById("questionCard").classList.add("hidden");
      document.getElementById("whCard").classList.add("hidden");
    });

    function showQuestion() {
      const data = currentGrade === "grade3" ? grade3_questions : gradePre2_questions;
      const i = Math.floor(Math.random() * data.length);
      currentQA = data[i];

      document.getElementById("questionText").textContent = currentQA.question;
      document.getElementById("yesAnswer").textContent = "";
      document.getElementById("noAnswer").textContent = "";
      document.getElementById("yesAnswer").classList.add("hidden");
      document.getElementById("noAnswer").classList.add("hidden");
      document.getElementById("questionCard").classList.remove("hidden");
    }

    function showAnswer(type) {
      if (!currentQA) return;
      const answer = currentQA.answers[type];
      const el = document.getElementById(type + "Answer");
      el.textContent = answer;
      el.classList.remove("hidden");
    }

    function showWhQuestion() {
      const data = currentGrade === "grade3" ? grade3_wh_questions : gradePre2_wh_questions;
      const i = Math.floor(Math.random() * data.length);
      currentWhQA = data[i];

      document.getElementById("whQuestionText").textContent = currentWhQA.question;
      document.getElementById("yesAnswerWh").textContent = "";
      document.getElementById("noAnswerWh").textContent = "";
      document.getElementById("yesAnswerWh").classList.add("hidden");
      document.getElementById("noAnswerWh").classList.add("hidden");

      // ボタン表示の切り替え
      if (currentGrade === "grade3") {
        document.getElementById("yesBtnWh").style.display = "none";
        document.getElementById("noBtnWh").style.display = "none";
      } else {
        document.getElementById("yesBtnWh").style.display = "inline-block";
        document.getElementById("noBtnWh").style.display = "inline-block";
      }

      document.getElementById("whCard").classList.remove("hidden");
    }

    function showWhAnswer(type) {
      if (!currentWhQA) return;
      const answer = currentWhQA.answers[type];
      const el = document.getElementById(type + "AnswerWh");
      el.textContent = answer;
      el.classList.remove("hidden");
    }
  </script>
</body>
</html>
